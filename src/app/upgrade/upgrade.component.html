<!-- HEADER -->
<div class="header">
  <div class="container-fluid px-md-5">
    <!-- Body -->
    <div class="header-body">
      <div class="row align-items-end">
        <div class="col">
          <!-- Title -->
          <h1 class="header-title" i18n="@@upgradeHeaderTitle">
            Upgrade Governance
          </h1>
        </div>
      </div> <!-- / .row -->
    </div> <!-- / .header-body -->
  </div>
</div> <!-- / .header -->
<!-- CARDS -->
<div class="container-fluid pb-6 px-md-5">
  <div class="row">
    <div class="col-12">
      <div class="card list-group mb-4">
        <div class="card-header border-bottom-0">
          <div class="row align-items-center justify-content-between">
            <!-- If voting phase -->
            <div class="col-auto">
              <!-- Title -->
              <h4 class="card-header-title" i18n="@@upgradeCardTitle">
                Vote
              </h4>
            </div>
            <div class="col-auto text-right pr-2">
              <h6 class="header-pretitle text-secondary mb-2" i18n="@@upgradeCardPreTitleQuorum">
                Quorum
              </h6>
              <h4 class="header-title mb-0">
                1.42% <ng-container i18n="@@upgradeCardQuorumValueNeeded">(10% needed)</ng-container>
              </h4>
            </div>
            <!-- If no voting phase -->
            <div class="col-auto d-none">
              <!-- Title -->
              <h4 class="card-header-title" i18n="@@upgradeCandidateCardTitle">
                Upgrade candidate
              </h4>
            </div>
            <!-- If waiting status -->
            <div class="col-auto d-none">
              <!-- Title -->
              <h4 class="card-header-title" i18n="@@upgradeStatusCardTitle">
                Upgrade status
              </h4>
            </div>
          </div> <!-- / .row -->
        </div>
        <!-- If no dev candidate -->
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="#"
          data-toggle="modal" data-target="#modalUpgrade">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-check-circle h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0" i18n="@@upgradeBetoken">Upgrade Betoken</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">457&nbsp;<ng-container i18n="@@upgradeNbVotes">votes</ng-container></span>
            </div>
          </div>
        </a>
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="#"
          data-toggle="modal" data-target="#modalUpgrade">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-danger"><i class="fe fe-x h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0" i18n="@@dontUpgradeBetoken">Don't upgrade Betoken</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">34&nbsp;<ng-container i18n="@@upgradeNbVotes">votes</ng-container></span>
            </div>
          </div>
        </a>
        <!-- If dev candidate -->
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code"
          target="_blank">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-primary"><i class="fe fe-code h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0" i18n="@@upgradeDevsCandidate">Developers upgrade candidate</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold" i18n="@@review">Review</span>
            </div>
          </div>
        </a>
        <!-- If upgrade initiated -->
        <div class="list-group-item border-bottom-0 border-left-0 border-right-0">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-transparent">
                  <div class="spinner-grow text-success spinner-grow-sm" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
                </span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-1 text-secondary" i18n="@@upgradeInitiated">Upgrade initiated</h4>
              <h6 class="text-secondary mb-0" i18n="@@upgradeInitiatedSubTitle">Waiting propagation decision</h6>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold text-secondary">3,423&nbsp;<ng-container i18n="@@upgradeNbVotes">votes</ng-container></span>
            </div>
          </div>
        </div>
        <!-- If upgrade initiated and voter without the biggest Kairo tokens balance -->
        <div class="list-group-item border-bottom-0 border-left-0 border-right-0">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-transparent">
                  <div class="spinner-grow text-warning spinner-grow-sm" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
                </span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-1 text-secondary" i18n="@@waitingUgradeCandidate">Waiting upgrade candidate</h4>
              <h6 class="text-secondary mb-0" i18n="@@waitingUgradeCandidateSubtitle">From voter with the biggest KRO balance</h6>
            </div>
          </div>
        </div>
        <!-- If upgrade initiated and voter with the biggest Kairo tokens balance -->
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="#"
          data-toggle="modal" data-target="#modalUpgrade">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-primary"><i class="fe fe-git-pull-request h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0" i18n="@@submitUpgradeCandidate">Submit upgrade candidate</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold" i18n="@@modalCtaContinue">Continue</span>
            </div>
          </div>
        </a>
        <!-- If manager upgrade candidate -->
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="#"
          data-toggle="modal" data-target="#modalUpgrade">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-check-circle h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@upgradeTo">Upgrade to</ng-container>&nbsp;0x00..0000</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">457&nbsp;<ng-container i18n="@@upgradeNbVotes">votes</ng-container></span>
            </div>
          </div>
        </a>
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="#"
          data-toggle="modal" data-target="#modalUpgrade">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-danger"><i class="fe fe-x h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@dontUpgradeTo">Don't upgrade to</ng-container>&nbsp;0x00..0000</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">34&nbsp;<ng-container i18n="@@upgradeNbVotes">votes</ng-container></span>
            </div>
          </div>
        </a>
        <!-- If manager upgrade candidate accepted -->
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code"
          target="_blank">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-check-circle h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@upgrade">Upgrade</ng-container>&nbsp;0x00..0000&nbsp;<ng-container i18n="@@accepted">accepted</ng-container></h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold" i18n="@@review">Review</span>
            </div>
          </div>
        </a>
      </div>
      <div class="card list-group">
        <div class="card-header border-bottom-0">
          <div class="row align-items-center justify-content-between">
            <div class="col-auto">
              <!-- Title -->
              <h4 class="card-header-title" i18n="@@upgradeHistoryCardTitle">
                Upgrades history
              </h4>
            </div>
          </div> <!-- / .row -->
        </div>
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code"
          target="_blank">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-git-merge h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@upgrade">Upgrade</ng-container>&nbsp;0x00..0000</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">8/30/2020</span>
            </div>
          </div>
        </a>
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code"
          target="_blank">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-git-merge h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@upgrade">Upgrade</ng-container>&nbsp;0x00..0000</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">7/30/2019</span>
            </div>
          </div>
        </a>
        <a class="list-group-item list-group-item-action border-bottom-0 border-left-0 border-right-0" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code"
          target="_blank">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <span class="avatar avatar-xs">
                <span class="avatar-title rounded-circle bg-success"><i class="fe fe-git-merge h4 mb-0"></i></span>
              </span>
            </div>
            <div class="col pl-3">
              <h4 class="mb-0"><ng-container i18n="@@upgrade">Upgrade</ng-container>&nbsp;0x00..0000</h4>
            </div>
            <div class="col-auto text-right">
              <span class="font-weight-bold">6/30/2019</span>
            </div>
          </div>
        </a>
        <div class="list-group-item border-bottom-0 border-left-0 border-right-0">
          <div class="row d-flex align-items-center no-gutters">
            <div class="col-auto">
              <h4 class="mb-0 text-secondary" i18n="@@noUpgradeHistory">No upgrade yet</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- / .row -->
  <a href="https://github.com/solidified-platform/audits/blob/master/Audit%20Report%20-%20%20Betoken%20%5B20.05.2019%5D.pdf" target="_blank">
    <div class="row align-items-center justify-content-center">
      <div class="col-auto mb-2 mb-lg-0">
        <div class="avatar avatar-sm">
          <img class="avatar-img rounded-circle bg-secondary" src="assets/img/solidified-logo.png" alt="Solidified logo">
        </div>
      </div>
      <div class="col-auto">
        <p class="small text-secondary mb-0 text-center" i18n="@@solidifiedAudit">Betoken Smart Contracts are audited and secured by Solidified</p>
      </div>
      <div class="col-auto">
        <i class="fe fe-arrow-right text-secondary"></i>
      </div>
    </div>
  </a>
</div>

<!-- modalUpgrade -->
<div class="modal fade fixed-right" id="modalUpgrade" tabindex="-1" role="dialog" aria-labelledby="modalUpgrade"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-vertical bg-white" role="document">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h4 class="modal-title" i18n="@@modalUpgradeVoteTitle">
          Vote
        </h4>
        <h4 class="modal-title d-none" i18n="@@modalUpgradeSubmitTitle">
          Submit upgrade candidate
        </h4>
        <!-- Confirm tx -->
        <h4 class="modal-title d-none" i18n="@@modalTitleConfirmTx">
          Confirm transaction
        </h4>
        <!-- Processing tx -->
        <h4 class="modal-title d-none" i18n="@@modalTitleProcessingTx">
          Processing transaction
        </h4>
        <!-- Confirmed tx -->
        <h4 class="modal-title d-none" i18n="@@modalTitleTxConfirmed">
          Transaction confirmed
        </h4>
        <!-- Error -->
        <h4 class="modal-title d-none" i18n="@@modalTitleError">
          That's an error
        </h4>
        <!-- Close -->
        <button type="button" class="close" data-dismiss="modal" i18n-aria-label="@@modalAriaLabelClose"
          aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <!-- progress bar vote -->
      <div class="card-header py-0 border-0" style="min-height: 24px;">
        <div class="progress" style="height: 8px;">
          <div [ngClass]="{'bg-success': topupPopupStep >= 0, 'bg-secondary': topupPopupStep !== 0}"
            class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
          <div [ngClass]="{'bg-success': topupPopupStep >= 1, 'bg-secondary': topupPopupStep !== 1}"
            class="progress-bar border-left" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
          <div [ngClass]="{'bg-success': topupPopupStep >= 2, 'bg-secondary': topupPopupStep !== 2}"
            class="progress-bar border-left" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
          <div [ngClass]="{'bg-success': topupPopupStep >= 3, 'bg-secondary': topupPopupStep !== 3}"
            class="progress-bar border-left" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
      </div>

      <div class="modal-body pb-5">
        <div class="row">
          <!-- IDEA: Vote for a manager initiated upgrade -->
          <div class="col text-center">
            <span class="avatar mb-4">
              <span class="avatar-title rounded-circle bg-success"><i class="fe fe-check-circle h3 mb-0"></i></span>
            </span>
            <h1 i18n="@@upgradeBetoken">Upgrade Betoken</h1>
            <p class="text-secondary mb-0" i18n="@@modalUpgradeBetokenSubtitle">Vote for a manager initiated upgrade.</p>
            <a href="https://betoken.gitbook.io/docs/govern/what-is-the-upgrade-governance#2-manager-initiated-upgrade" target="_blank" i18n="@@learnMore">Learn more</a>
          </div>
          <!-- IDEA: Vote against a manager initiated upgrade -->
          <div class="col text-center d-none">
            <span class="avatar mb-4">
              <span class="avatar-title rounded-circle bg-danger"><i class="fe fe-x h3 mb-0"></i></span>
            </span>
            <h1 i18n="@@dontUpgradeBetoken">Don't upgrade Betoken</h1>
            <p class="text-secondary mb-0" i18n="@@modalDontUpgradeBetokenSubtitle">Vote against a manager initiated upgrade.</p>
            <a href="https://betoken.gitbook.io/docs/govern/what-is-the-upgrade-governance#2-manager-initiated-upgrade" target="_blank" i18n="@@learnMore">Learn more</a>
          </div>
          <!-- IDEA: Vote for the upgrade to 0x000 -->
          <div class="col text-center d-none">
            <span class="avatar mb-4">
              <span class="avatar-title rounded-circle bg-success"><i class="fe fe-check-circle h3 mb-0"></i></span>
            </span>
            <h1><ng-container i18n="@@upgradeTo">Upgrade to</ng-container>&nbsp;0x00..0000</h1>
            <p class="text-secondary" i18n="@@modalUpgradeToSubtitle">Vote for the upgrade to this new smart contract.</p>
            <a class="btn btn-small btn-white mr-2" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code" target="_blank">Review</a>
            <a class="btn btn-small btn-link" href="https://betoken.gitbook.io/docs/govern/what-is-the-upgrade-governance#2-manager-initiated-upgrade" target="_blank" i18n="@@learnMore">Learn more</a>
          </div>
          <!-- IDEA: Vote against the upgrade to 0x000 -->
          <div class="col text-center d-none">
            <span class="avatar mb-4">
              <span class="avatar-title rounded-circle bg-danger"><i class="fe fe-x h3 mb-0"></i></span>
            </span>
            <h1><ng-container i18n="@@dontUpgradeTo">Don't upgrade to</ng-container>&nbsp;0x00..0000</h1>
            <p class="text-secondary" i18n="@@modalDontUpgradeToSubtitle">Vote against the upgrade to this new smart contract.</p>
            <a class="btn btn-small btn-white mr-2" href="https://etherscan.io/address/0x881a0bdf9514c116f4576f4fba263bf5397fca83#code" target="_blank" i18n="@@review">Review</a>
            <a class="btn btn-small btn-link" href="https://betoken.gitbook.io/docs/govern/what-is-the-upgrade-governance#2-manager-initiated-upgrade" target="_blank" i18n="@@learnMore">Learn more</a>
          </div>
          <!-- IDEA: submit upgrade candidate -->
          <div class="col text-center d-none">
            <span class="avatar mb-4">
              <span class="avatar-title rounded-circle bg-primary"><i class="fe fe-git-pull-request h3 mb-0"></i></span>
            </span>
            <h1 i18n="@@submitUpgradeCandidate">Submit upgrade candidate</h1>
            <p class="text-secondary mb-0" i18n="@@modalSubmitUpgradeCandidateSubtitle">Submit the candidate smart contract to vote on. During the next two days, managers other than you, may use Kairo tokens to vote on whether or not to accept this candidate as the upgrade target.</p>
            <a href="https://betoken.gitbook.io/docs/govern/what-is-the-upgrade-governance#2-manager-initiated-upgrade" target="_blank" i18n="@@learnMore">Learn more</a>
            <form class="my-4">
              <div class="form-group">
                <label for="smartContractAddress" i18n="@@smartContractAddress">Smart contract address</label>
                <input type="text" class="form-control" id="smartContractAddress" placeholder="0x00..">
              </div>
            </form>
          </div>
        </div>
        <!-- IDEA: if vote, then display following components -->
        <hr class="my-4">
        <div class="row">
          <div class="col text-center">
            <h1 class="display-2 mb-2">81.32</h1>
            <h6 class="header-pretitle" i18n="@@modalUpgradeVotingWeight">Your voting weight</h6>
            <small class="text-secondary" i18n="@@modalUpgradeVotingWeightSubtitle">Your voting weight is equal to your KRO balance.</small>
          </div>
        </div>

        <!--Step 1: confirm tx in wallet-->
        <img class="image-fluid d-block mx-auto mb-4" src="assets/img/animated-logo.svg" alt="Betoken logo"
          style="width: 88px;" *ngIf="topupPopupStep == 1 || topupPopupStep === 2">
        <p class="text-center text-muted mb-5" *ngIf="topupPopupStep === 1" i18n="@@modalBodyTextStep1">
          Confirm the transaction in your wallet’s interface to save it on the Ethereum blockchain. It's fine to stick
          with these defaults gas limit and price.
        </p>

        <!--Step 2: tx broadcasted-->
        <p class="text-center text-muted mb-5" *ngIf="topupPopupStep == 2" i18n="@@modalBodyTextTxBroadcasted">
          Your transaction is being saved on the Ethereum blockchain.
        </p>

        <!--Step 3: tx confirmed-->
        <div class="d-none">
          <p class="h1 text-center">
            <i class="fe fe-check-circle text-success"></i>
          </p>
          <p class="text-center text-muted mb-5" i18n="@@modalBodyTextVoteConfirmed">
            You have successfully voted.
          </p>
        </div>

        <hr *ngIf="topupPopupStep === 2 || topupPopupStep === 3">
        <form *ngIf="topupPopupStep === 2 || topupPopupStep === 3">
          <div class="form-group">
            <label i18n="@@modalBodyTxHash">Transaction hash</label>
            <div class="input-group mb-3">
              <input type="text" class="form-control form-control-lg" value="{{transactionId}}"
                aria-label="Transaction hash">
              <div class="input-group-append">
                <a class="btn btn-white h-100 d-flex align-items-center"
                  href="https://etherscan.io/tx/{{transactionId}}" target="_blank"><i
                    class="fe fe-external-link"></i></a>
              </div>
            </div>
          </div>
        </form>

        <!-- error -->
        <div *ngIf="topupPopupStep == -1">
          <p class="h1 text-center">
            <i class="fe fe-alert-circle text-danger"></i>
          </p>
          <p class="text-center text-muted mb-5" i18n="@@modalErrorText">
            The operation has resulted in an error. Please try again.
          </p>
          <p class="text-center text-muted mb-5">
            <ng-container i18n="@@modalErrorMsg">Error message:</ng-container>&nbsp;{{errorMsg}}
          </p>
        </div>
      </div>
      <div class="modal-footer">
        <!-- Continue button -->
        <button type="submit" class="btn btn-block btn-success mt-auto" aria-label="Continue" i18n="@@modalCtaContinue">
          Continue
        </button>
      </div>
      <div class="modal-footer" *ngIf="topupPopupStep === 2 || topupPopupStep === 3">
        <!-- close button panel -->
        <button type="submit" class="btn btn-block btn-white mt-auto" data-dismiss="modal"
          i18n-aria-label="@@modalAriaLabelClose" aria-label="Close" i18n="@@modalCtaClose">
          Close
        </button>
      </div>
      <div class="modal-footer" *ngIf="topupPopupStep == -1">
        <!-- Try again button for error -->
        <button type="submit" class="btn btn-block btn-white mt-auto" i18n="@@modalTryAgainAriaLabel"
          aria-label="Try again" (click)="topupPopupStep = 0" i18n="@@modalTryAgain">
          Try again
        </button>
      </div>
    </div>
  </div>
</div><!-- / modal -->
