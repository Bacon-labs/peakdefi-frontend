<!-- HEADER -->
<div class="header">
    <div class="container-fluid">
      <!-- Body -->
      <div class="header-body">
        <div class="alert alert-primary alert-dismissible fade show d-flex d-md-none" role="alert">
          <a class="text-white" data-toggle="modal" href="#modalReferral">
            <strong>Invite friends</strong>, earn Kairo
          </a>
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="row align-items-end">
          <div class="col">

            <!-- Pretitle -->
            <h6 class="header-pretitle">
              Overview
            </h6>

            <!-- Title -->
            <h1 class="header-title">
              Managers ranking
            </h1>
          </div>
          <div class="col-auto d-none d-md-flex">

            <!-- Button -->
            <button class="btn btn-primary mt-3 mt-md-0" data-toggle="modal" href="#modalReferral">
              Invite friends, earn Kairo
            </button>

          </div>
        </div> <!-- / .row -->
      </div> <!-- / .header-body -->

    </div>
    </div> <!-- / .header -->

    <!-- CARDS -->
    <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <!-- Card -->
        <div class="card" data-toggle="lists" data-lists-values='["rank", "manager", "kro-balance", "monthlyPL"]'>
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">

                <!-- Title -->
                <h4 class="card-header-title">
                  Managers Balances & P/L
                </h4>

              </div>
              <div class="col-auto">

                  <!-- Refresh -->
                  <button class="btn btn-sm btn-white" type="button" name="button" (click) = "refresh()"><i class="fe fe-refresh-cw align-middle" *ngIf="isLoading() == false"></i><div class="loader loader-sm loader-secondary my-1" *ngIf="isLoading()"></div></button>

              </div>
            </div> <!-- / .row -->
          </div>
          <div class="card-header">
            <div class="row">
              <div class="col-12">

                <!-- Form -->
                <form>
                  <div class="input-group input-group-flush input-group-merge">
                    <input type="search" class="form-control form-control-prepended search" (keyup)="filterTable($event,'rankings-table',1)" placeholder="Search">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <span class="fe fe-search"></span>
                      </div>
                    </div>
                  </div>
                </form>

              </div>
            </div> <!-- / .row -->
          </div>
          <div class="table-responsive">
            <table class="table table-sm table-nowrap card-table">
              <thead>
                <tr>
                  <th>
                    <a href="#/rankings/#" class="text-muted sort" data-sort="rank">
                      Rank
                    </a>
                  </th>
                  <th>
                    <a href="#/rankings/#" class="text-muted sort" data-sort="manager">
                      Manager
                    </a>
                  </th>
                  <th>
                    <a href="#/rankings/#" class="text-muted sort" data-sort="kro-balance">
                      KRO Balance
                    </a>
                  </th>
                  <th>
                    <a href="#/rankings/#" class="text-muted sort" data-sort="monthlyPL">
                      Monthly P/L
                    </a>
                  </th>
                </tr>
              </thead>
              <tbody class="list" id="rankings-table">
                <tr class="bg-dark text-white">
                  <td class="rank align-middle">
                    <strong>{{userRanking}}</strong>
                  </td>
                  <td class="manager align-middle">
                    <i class="fe fe-star text-warning ml-2"></i> You
                  </td>
                  <td class="kro-balance align-middle">
                    {{userValue}}
                  </td>
                  <td class="monthlyPL align-middle">
                    <!-- Badge -->
                    <span class="badge badge-xl" [ngClass]="{'badge-soft-success': +userROI >= 0, 'badge-soft-danger': 0 > +userROI}">
                     {{userROI}}%
                    </span>
                  </td>
                </tr>
                <tr *ngFor="let ranking of rankingArray">
                  <td class="rank align-middle">
                    <strong>{{ranking.rank}}</strong>
                  </td>
                  <td class="manager align-middle">
                    <span class="d-block text-truncate" style="width: 6rem;">{{ranking.address}}</span>
                  </td>
                  <td class="kro-balance align-middle">
                    {{ranking.kairoBalance}}
                  </td>
                  <td class="monthlyPL align-middle">
                    <!-- Badge -->
                    <span class="badge badge-xl" [ngClass]="{'badge-soft-success': +ranking.cycleROI >= 0, 'badge-soft-danger': 0 > +ranking.cycleROI}">
                      {{ranking.cycleROI}}%
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div> <!-- / .row -->
</div>
