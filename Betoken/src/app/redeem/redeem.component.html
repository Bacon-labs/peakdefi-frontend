<div class="redeem-modal-wrapper" [@toggleRedeem]="state" [class.active]="active">
    <div class="content redeem-phase">
        <div class="modal-header d-flex align-items-center">
            <div class="modal-tittle">
                Redeem your commissions
            </div>
            <div class="modal-close">
                <button type="button" class="close black-font" (click)="closePopup()">&times;</button>
            </div>
        </div>
        <div class="time-wrapper">
            <p class="m-0">Time left to redeem commission: {{days}}d {{hours}}h {{minutes}}m {{seconds}}s
            </p>
        </div>

        <div class="main-sec" *ngIf="step1">
            <p class="m-0 pb-4 black-font">  
                The fund was profitables in this investmentâ€™s cycle. All KRO holders are able to redeem a commission.
                You can choose in which token you want to redeem it.
            </p>
        
            <p class="m-0">Redeem with</p>
            <div class="mt-2 mb-4 outline-box w-100 d-flex  align-items-center justify-content-between">
                <select class="border-0 betoken-font w-100" (change)="updateRedeemOption($event)">
                    <option>DAI - redeem commission</option>
                    <option>BTKS - redeem commission in shares</option>
                </select>
            </div>
            <div>
                <p class="m-0">
                    Total commission to redeem
                </p>
            </div>
            <div class="mt-2 outline-box w-100 d-flex  align-items-center justify-content-between">
                <p class="m-0">{{redeemcommissionvalue}}</p>
            </div>

        </div>

        <div class="confirmation-sec m-3" *ngIf="step2">
            <p class="mb-3">
                ðŸš¨ Confirm your trade for this asset
            </p>
            <p class="m-0 pb-4 black-font">
                Confirm the transaction in the Metamaskâ€™s interface to submit it to the Betoken fund contract. 
                It's fine to stick with these defaults gas limit and price.
            </p>
            <div class="d-flex justify-content-center mb-5">
                <img src="assets/images/metamask-big.png" class="pointer " (click)="confirmredeem()">
            </div>
        </div>

        <div class="broadcast-sec m-3" *ngIf="step3">
            <p class="mb-3">
                ðŸŽ‰ Transaction broadcasted!
            </p>
            <p class="m-0 pb-4 black-font">
                Your transaction is being saved on the Ethereum blockchain. 
                You can check its status on Etherscan.
            </p>
            <div class="d-flex justify-content-center mb-5">
                <img src="assets/images/loader.png" class="pointer">
            </div>
            <p class="m-0">
                Transaction ID
            </p>
            <div class="mt-2 outline-box w-100 d-flex align-items-center justify-content-between bg-white ">
                    <div clas = "overflowDesign">
                        <p class="m-0">{{transactionId}}</p>
                        <a href="https://rinkeby.etherscan.io/tx/{{transactionId}}" target="_blank"> <img src="assets/images/export.png" class="pointer ml-1"> </a>
                    </div>
            </div>
        </div>

        <div class="final-sec m-3" *ngIf="step4">
            <p class="mb-3">
                ðŸ™Œ Done. Check your balance!
            </p>
            <p class="m-0 pb-4 black-font">
                You redeeemed {{redeemcommissionvalue}} BTF shares.
            </p>
            <div class="d-flex justify-content-center mb-5">
                <img src="assets/images/finish.png" class="pointer ">
            </div>
            <p class="m-0">
                Transaction ID
            </p>
            <div class="mt-2 outline-box w-100 d-flex align-items-center justify-content-between bg-white">
                    <div clas = "overflowDesign">
                        <p class="m-0">{{transactionId}}</p>
                        <a href="https://rinkeby.etherscan.io/tx/{{transactionId}}" target="_blank"> <img src="assets/images/export.png" class="pointer ml-1"> </a>
                    </div>
            </div>

        </div>

        <div class="modal-button-wrapper">
                <button class="text-center outline-button active w-100" (click)="redeem()" *ngIf= "step1">REDEEM COMMSSIONS</button>
                <button class="text-center outline-button active w-100" (click)="closePopup()" *ngIf= "step4">REDEEM SUCCESSFUL</button>
        </div>
        
    </div>
</div>

<div class="overlay-popup" [class.active]="active" (click)="closePopup()"></div>

<div class="col-12 d-none d-lg-none d-flex button-wrapper text-right justify-content-end footer-wrapper fixed-bottom bg-white pt-3 pb-3"
    *ngIf="footerbtn1">
    <button class="text-center outline-button active" (click)="redeemPopup()">REDEEM COMMISSION</button>
</div>

<div class="col-12 d-none d-lg-none d-flex button-wrapper text-right justify-content-end footer-wrapper fixed-bottom bg-white  pt-3 pb-3"
    *ngIf="footerbtn2">
    <button class="text-center outline-button active">NEW CYCLE</button>
</div>