<div class="redeem-modal-wrapper" [@toggleRedeem]="state" [class.active]="active">
    <div class="content redeem-phase">
        <div class="modal-header d-flex align-items-center">
            <div class="modal-tittle">
                Redeem your commissions
            </div>
            <div class="modal-close">
                <button type="button" routerLink="/home" class="close black-font" (click)="closePopup()">&times;</button>
            </div>
        </div>
        <div class="time-wrapper">
            <p class="m-0">Time left to redeem commission: {{days}}d {{hours}}h {{minutes}}m {{seconds}}s
            </p>
        </div>

        <div class="main-sec" *ngIf="step1">
            <p class="m-0 pb-4 black-font">
                As a Betoken fund manager, you're entitled to a commission payout every month, the amount of which is based upon your performance.
            </p>
            <p class="m-0 pb-4 black-font">
                You may choose to redeem your commission in DAI Stablecoin or in Betoken Shares.
            </p>

            <p class="m-0">Redeem commission in</p>
            <div class="mt-2 mb-4 outline-box w-100 d-flex  align-items-center justify-content-between">
                <select class="border-0 betoken-font w-100" (change)="updateRedeemOption($event)">
                    <option>DAI Stablecoin</option>
                    <option>Betoken Shares</option>
                </select>
            </div>
            <div>
                <p class="m-0">
                    Total commission value
                </p>
            </div>
            <div class="mt-2 outline-box w-100 d-flex  align-items-center justify-content-between">
                <p class="m-0">{{redeemcommissionvalue}} DAI</p>
            </div>

        </div>

        <div class="confirmation-sec" *ngIf="step2">
            <p class="mb-3">
                ðŸš¨ Confirm your trade for this asset
            </p>
            <p class="m-0 pb-4 black-font">
                Confirm the transaction in the Metamaskâ€™s interface to submit it to the Betoken fund contract.
                It's fine to stick with these defaults gas limit and price.
            </p>
            <div class="d-flex justify-content-center mb-5">
                <img src="assets/images/metamask-big.png" width="128" height="128">
            </div>
        </div>

        <div class="broadcast-sec m-3" *ngIf="step3">
            <p class="mb-3">
                ðŸŽ‰ Transaction broadcasted!
            </p>
            <p class="m-0 pb-4 black-font">
                Your transaction is being saved on the Ethereum blockchain.
                You can check its status on Etherscan.
            </p>
            <div class="d-flex justify-content-center mb-5">
              <div class="spinner">
                  <div class="double-bounce1"></div>
                  <div class="double-bounce2"></div>
              </div>
            </div>
            <p>
                Transaction ID
            </p>
            <div class="mt-2 outline-box w-100 d-flex align-items-center justify-content-between">
              <input class="tx-hash" type="text" name="" value="{{transactionId}}">
              <a class="link-tx-hash" href="https://rinkeby.etherscan.io/tx/{{transactionId}}" target="_blank"> <img src="assets/images/ic_launch_black_24px.svg" class="pointer ml-2"> </a>
            </div>
        </div>

        <div class="final-sec m-3" *ngIf="step4">
            <p class="mb-3">
                ðŸ™Œ Done. Check your balance!
            </p>
            <p class="m-0 pb-4 black-font">
                You redeeemed {{redeemcommissionvalue}} DAI (or equivalent Betoken Shares).
            </p>
            <div class="d-flex justify-content-center mb-5">
                <img src="assets/images/finish.png">
            </div>
            <p class="m-0">
                Transaction ID
            </p>
            <div class="mt-2 outline-box w-100 d-flex align-items-center justify-content-between bg-white">
                <div class="overflowDesign">
                    <p class="m-0">{{transactionId}}</p>
                    <a href="https://rinkeby.etherscan.io/tx/{{transactionId}}" target="_blank"> <img src="assets/images/export.png" class="pointer ml-1"> </a>
                </div>
            </div>
        </div>
        <div class="modal-button-wrapper">
            <button class="text-center outline-button active w-100" (click)="redeem()" *ngIf= "step1">REDEEM COMMSSIONS</button>
            <button class="text-center outline-button active w-100" (click)="closePopup()" *ngIf= "step4">CLOSE PANEL</button>
        </div>

    </div>
</div>

<div class="overlay-popup" routerLink="/home" [class.active]="active" (click)="closePopup()"></div>

<div class="col-12 d-none d-lg-none d-flex button-wrapper text-right justify-content-end footer-wrapper fixed-bottom bg-white pt-3 pb-3"
    *ngIf="footerbtn1">
    <button class="text-center outline-button active" (click)="redeemPopup()">REDEEM COMMISSION</button>
</div>

<div class="col-12 d-none d-lg-none d-flex button-wrapper text-right justify-content-end footer-wrapper fixed-bottom bg-white  pt-3 pb-3"
    *ngIf="footerbtn2">
    <button class="text-center outline-button active">NEW CYCLE</button>
</div>
